"use strict";(()=>{figma.showUI(__html__,{width:240,height:100});figma.ui.onmessage=async a=>{if(a.type==="button-clicked"){let s=await f();if(s.length>0){for(let e of s)if("fills"in e){let i=e.fills;for(let l of i)if(l.type==="IMAGE"&&"imageHash"in l&&l.visible!==!1){let t=figma.getImageByHash(l.imageHash);if(t){let o=await t.getBytesAsync();figma.ui.postMessage({type:"image-data",imageBytes:[...o],fileName:"".concat(e.name||"image",".png")})}}}figma.ui.postMessage({type:"download-complete"})}else console.log("No images found in the selected frames."),figma.closePlugin("No images found.")}};async function f(){let s=figma.currentPage.selection.filter(i=>i.type==="FRAME");if(s.length===0)return console.log("No selected frame(s) found."),[];let e=[];return s.forEach(i=>{e=e.concat(n(i,[]))}),e}function n(a,s){if("fills"in a){let e=a.fills;for(let i of e)i.type==="IMAGE"&&"imageHash"in i&&i.visible!==!1&&s.push(a)}return"children"in a&&a.children.forEach(e=>{n(e,s)}),s}})();
//# sourceMappingURL=code.js.map
